BoltDB supports nested buckets
======
# Issue
BoltDB supports nested buckets, but etcd doesn't support nested buckets. The "etcdutl defrag" ignores all the nested buckets. After running the "etcdutl defrag" command, all the nested buckets will be lost.

The file 'db' is generated by command "go run main.go". The root page id is 6, and it's leaf page. 
```
wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go stats ./db 
Aggregate statistics for 2 buckets

Page count statistics
	Number of logical branch pages: 0
	Number of physical branch overflow pages: 0
	Number of logical leaf pages: 2
	Number of physical leaf overflow pages: 0
Tree statistics
	Number of keys/value pairs: 51
	Number of levels in B+tree: 2
Page size utilization
	Bytes allocated for physical branch pages: 0
	Bytes actually used for branch data: 0 (0%)
	Bytes allocated for physical leaf pages: 8192
	Bytes actually used for leaf data: 1568 (19%)
Bucket statistics
	Total number of buckets: 6
	Total number on inlined buckets: 4 (66%)
	Bytes used for inlined buckets: 1184 (75%)
```

The root page id is 6, and it's leaf page. Bucket "ben_a" points to page 5, and bucket "ben_b" points to page 4.
```
wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go page ./db 6
Page ID:    6
Page Type:  leaf
Total Size: 4096 bytes
Item Count: 2

"ben_a": <pgid=5,seq=0>
"ben_b": <pgid=4,seq=0>

wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go page ./db 5
Page ID:    5
Page Type:  leaf
Total Size: 4096 bytes
Item Count: 5

"ben_a_1": <pgid=0,seq=0>
"ben_a_2": <pgid=0,seq=0>
"key-0": "value-0"
"key-1": "value-1"
"key-2": "value-2"

wachao-a01:bucketDemo wachao$ 
wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go page ./db 4
Page ID:    4
Page Type:  leaf
Total Size: 4096 bytes
Item Count: 6

"ben_b_1": <pgid=0,seq=0>
"ben_b_2": <pgid=0,seq=0>
"key-0": "value-0"
"key-1": "value-1"
"key-2": "value-2"
"key-3": "value-3"

wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go page ./db 0
Page ID:    0
Page Type:  meta
Total Size: 4096 bytes
Version:    2
Page Size:  4096 bytes
Flags:      00000000
Root:       <pgid=6>
Freelist:   <pgid=7>
HWM:        <pgid=8>
Txn ID:     2
Checksum:   6d38b867d6b9b7e0
```


The file etcd/member/snap/db is the result of "etcdutl defrag".
```wachao-a01:bucketDemo wachao$ etcdutl defrag --data-dir ./etcd/
2021-10-25T16:16:57+08:00	info	backend/backend.go:479	defragmenting	{"path": "etcd/member/snap/db", "current-db-size-bytes": 32768, "current-db-size": "33 kB", "current-db-size-in-use-bytes": 24576, "current-db-size-in-use": "25 kB"}
2021-10-25T16:16:57+08:00	info	backend/backend.go:537	finished defragmenting directory	{"path": "etcd/member/snap/db", "current-db-size-bytes-diff": -8192, "current-db-size-bytes": 24576, "current-db-size": "25 kB", "current-db-size-in-use-bytes-diff": -8192, "current-db-size-in-use-bytes": 16384, "current-db-size-in-use": "16 kB", "took": 0.140642802}
```

All the nested buckets
```wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go stats ./etcd/member/snap/db 
Aggregate statistics for 2 buckets

Page count statistics
	Number of logical branch pages: 0
	Number of physical branch overflow pages: 0
	Number of logical leaf pages: 0
	Number of physical leaf overflow pages: 0
Tree statistics
	Number of keys/value pairs: 11
	Number of levels in B+tree: 1
Page size utilization
	Bytes allocated for physical branch pages: 0
	Bytes actually used for branch data: 0 (0%)
	Bytes allocated for physical leaf pages: 0
	Bytes actually used for leaf data: 0 (0%)
Bucket statistics
	Total number of buckets: 2
	Total number on inlined buckets: 2 (100%)
	Bytes used for inlined buckets: 320 (0%)
```

The root page is 4. All key/values pairs (including the nested buckets, i.e. ben_a_1, ben_a_2, ben_b_1 and ben_b_2) are stored as nested buckets (ben_a and ben_b). 
```
wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go page ./etcd/member/snap/db 4
Page ID:    4
Page Type:  leaf
Total Size: 4096 bytes
Item Count: 2

"ben_a": <pgid=0,seq=0>
"ben_b": <pgid=0,seq=0>

wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go page ./etcd/member/snap/db 0
Page ID:    0
Page Type:  meta
Total Size: 4096 bytes
Version:    2
Page Size:  4096 bytes
Flags:      00000000
Root:       <pgid=4>
Freelist:   <pgid=5>
HWM:        <pgid=6>
Txn ID:     2
Checksum:   eef96d7a2c1b336e
```

# etcd real db
etcd doesn't create nested buckets, so it's not a problem for the "etcdutl defrag" command to ignore the nested buckets.

The file "etcd-db" comes from a Kubernetes cluster. 
```
wachao-a01:bucketDemo wachao$ go run ~/go/src/go.etcd.io/bbolt/cmd/bbolt/main.go buckets ./etcd-db 
alarm
auth
authRoles
authUsers
cluster
key
lease
members
members_removed
meta
```
